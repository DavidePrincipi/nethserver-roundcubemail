Summary: NethServer configuration for Roundcube mail client
Name: nethserver-roundcubemail
Version: @@VERSION@@
Release: @@RELEASE@@
License: GPL
Source: %{name}-%{version}.tar.gz
BuildArch: noarch

BuildRequires: nethserver-devtools

AutoReq: no
Requires: nethserver-httpd, nethserver-mysql, nethserver-mail-server
Requires: roundcubemail >= 1.0.0

%description
NethServer configuration for Roundcube mail client

%prep
%setup

%post
##Mysql DB Upgrade
if [ $1 -gt 1 ] ; then
/usr/share/roundcubemail/bin/updatedb.sh --dir /usr/share/roundcubemail/SQL/ --package mysql.initial.sql &> /dev/null
fi

%preun

%build
perl createlinks

%install
rm -rf $RPM_BUILD_ROOT
(cd root   ; find . -depth -print | cpio -dump $RPM_BUILD_ROOT)

%{genfilelist} $RPM_BUILD_ROOT > e-smith-%{version}-filelist

%clean 
rm -rf $RPM_BUILD_ROOT

%files -f e-smith-%{version}-filelist
%defattr(-,root,root)

%changelog
* Sat Oct 25 2014 Stephane de Labrusse <stephdl@de-labrusse.fr> - 1.0.3-1-ns6
- Added a LDAP AddressBook : Giacomo Sanchietti <giacomo.sanchietti@nethesis.it>

* Sun Oct 19 2014 Stephane de Labrusse <stephdl@de-labrusse.fr> - 1.0.2-1-ns6
- Upgrade to roundcubemail 1.0.2-1 - Bug #2902 [NethServer]
- Config.inc.php is now templated with several files
- Roundcubemail can be restricted to the local network,
- open to the WWW by default (public/private) - Bug #2886 [NethServer]
- New DB command to allow plugins in config.inc.php
- New templates.metadata for protecting Config.inc.php (0640 root/apache)

* Mon Aug 18 2014 Davide Principi <davide.principi@nethesis.it> - 1.0.1-1.ns6
- Roundcube: installation fails - Bug #2802 [NethServer]

* Fri Jun 06 2014 Giacomo Sanchietti <giacomo.sanchietti@nethesis.it> - 1.0.0-1.ns6
- Roundcube: add dashboard widget - Enhancement #2707

* Wed Feb 26 2014 Davide Principi <davide.principi@nethesis.it> - 0.0.2-1.ns6
- Experimental Roundcube webmail package - Enhancement #2511 [NethServer]


